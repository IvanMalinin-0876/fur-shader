!function e(t,r,n){function a(i,u){if(!r[i]){if(!t[i]){var d="function"==typeof require&&require;if(!u&&d)return d(i,!0);if(o)return o(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var c=r[i]={exports:{}};t[i][0].call(c.exports,function(e){var r=t[i][1][e];return a(r?r:e)},c,c.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,t,r){"use strict";e("./stage")},{"./stage":6}],2:[function(e,t,r){"use strict";function n(){o.add(i,"wind",0,5),o.add(i,"gravity",0,3),o.add(i,"furStrength",0,20),o.add(i,"furLength",4,32),o.add(i,"texture",u),o.add(i,"geometry",d),a.$datGui.append(o.domElement)}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./dom"),o=new dat.GUI({autoPlace:!1}),i={wind:1,gravity:.9,furStrength:3,furLength:12,texture:"giraffe",geometry:"Sphere"},u=["giraffe","tiger","cow","zebra","black-panther","bear","dot","white","knit","blue-tile","green-tile","fuji","wave"],d=["Sphere","Torus","TorusKnot","Tetrahedron","Octahedron","Icosahedron","Dodecahedron","Cone","Box","Cylinder","Text","Ring","Circle","Plane"];n(),r["default"]={config:i,textures:u}},{"./dom":3}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.$window=$(window),r.$stage=$("#stage"),r.$vertexShader=$("#vertexShader"),r.$fragmentShader=$("#fragmentShader"),r.$datGui=$("#datGui"),r.$textureInput=$("#textureInput")},{}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e)C=e.scene,k=e.renderer,G=e.camera,i(v()),U=new THREE.Texture(g()),U.needsUpdate=!0,U.wrapS=U.wrapT=THREE.RepeatWrapping,U.anisotropy=k.getMaxAnisotropy();else if(L.length>0){var t=void 0;for(t=0;t<L.length;t++)C.remove(L[t]);for(t=0;t<L.length;t++)L[t].geometry&&L[t].geometry.dispose(),L[t].material&&L[t].material.dispose();L=[]}o()}function o(){var e=!1;switch(y["default"].config.geometry){case"Sphere":_=new THREE.SphereBufferGeometry(S/2,24,24);break;case"Torus":_=new THREE.TorusBufferGeometry(S/2,3,16,36);break;case"TorusKnot":_=new THREE.TorusKnotBufferGeometry(S/3,1);break;case"Tetrahedron":_=new THREE.TetrahedronGeometry(S/2);break;case"Octahedron":_=new THREE.OctahedronGeometry(S/2);break;case"Icosahedron":_=new THREE.IcosahedronGeometry(S/2);break;case"Dodecahedron":_=new THREE.DodecahedronGeometry(S/2);break;case"Cone":_=new THREE.ConeBufferGeometry(S/2,S,16);break;case"Box":_=new THREE.BoxBufferGeometry(S,S,S);break;case"Cylinder":_=new THREE.CylinderBufferGeometry(S/4,S/4,S/2,16);break;case"Text":h("optimer_bold",function(){_=new THREE.TextGeometry("FUR",{font:P,size:S/4,height:S/8}),s(_,O,U)}),e=!0;break;case"Ring":_=new THREE.RingBufferGeometry(S/4,S/2);break;case"Circle":_=new THREE.CircleBufferGeometry(S/2,32);break;case"Plane":_=new THREE.PlaneBufferGeometry(S,S)}e||s(_,O,U)}function i(e){O=(0,E["default"])(e),O.wrapS=O.wrapT=THREE.RepeatWrapping}function u(e){b.drawImage(e,0,0,e.width,e.height,0,0,R,R),O=new THREE.Texture(M),O.needsUpdate=!0,O.wrapS=O.wrapT=THREE.RepeatWrapping,a()}function d(){x!==y["default"].config.texture&&(x=y["default"].config.texture,i(v()),a())}function f(){T!==y["default"].config.geometry&&(T=y["default"].config.geometry,a())}function c(){void 0===I?B=1e3/60:(D=Date.now(),B=D-I,I=D);var e=B/16,t=Math.max(4,20/e),r=(W.x-q.x)/(5*t),n=(W.y-q.y)/(5*t);q.vx+=r,q.vy+=n,q.vx*=.96,q.vy*=.94,q.x+=q.vx,q.y+=q.vy,j.x=-(W.x-q.x)*y["default"].config.wind;var a=150*Math.sin(W.x)-G.position.x;j.y=-y["default"].config.gravity+Math.abs(a)/150-(W.y-q.y)*y["default"].config.wind,F+=.005*B;var o=void 0;for(o=0;o<L.length;o++)L[o].material.uniforms.time.value=F,L[o].material.uniforms.furStrength.value!==y["default"].config.furStrength&&(L[o].material.uniforms.furStrength.value=y["default"].config.furStrength),L[o].material.uniforms.spacing.value!==y["default"].config.furLength&&(L[o].material.uniforms.spacing.value=y["default"].config.furLength)}function l(){m.$stage.on("mousemove",function(e){e.originalEvent.preventDefault(),W.x=e.clientX/m.$stage.width()*2-1,W.y=2*-(e.clientY/m.$stage.height())+1}),m.$stage.on("touchmove",function(e){e.originalEvent.preventDefault(),W.x=e.originalEvent.touches[0].clientX/m.$stage.width()*2-1,W.y=2*-(e.originalEvent.touches[0].clientY/m.$stage.height())+1})}function s(e,t,r){var n=void 0,a=void 0,o=void 0,i=void 0;for(i=0;i<H;i++)n={color:{type:"c",value:new THREE.Color(16777215)},hairMap:{type:"t",value:r},colorMap:{type:"t",value:t},offset:{type:"f",value:i/H},furStrength:{type:"f",value:y["default"].config.furStrength},spacing:{type:"f",value:y["default"].config.furLength},time:{type:"f",value:F},gravity:{type:"v3",value:j}},a=new THREE.ShaderMaterial({uniforms:n,vertexShader:m.$vertexShader.text(),fragmentShader:m.$fragmentShader.text(),transparent:!0}),o=new THREE.Mesh(e,a),o.matrixAutoUpdate=!1,o.frustumCulled=!1,C.add(o),L.push(o)}function g(){var e=document.createElement("canvas");e.width=R,e.height=R;var t=e.getContext("2d"),r=void 0;for(r=0;r<2e4;r++)t.fillStyle="rgba(255,"+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+",1)",t.fillRect(Math.random()*e.width,Math.random()*e.height,2,2);return e}function v(){return"/assets/img/fur/"+y["default"].config.texture+".png"}function h(e,t){P?t():$.getJSON("/assets/font/"+e+".typeface.json",function(e){P=new THREE.Font(e),t()})}Object.defineProperty(r,"__esModule",{value:!0});var m=e("./dom"),p=e("./loadTexture"),E=n(p),w=e("./datGui"),y=n(w);r["default"]={init:a,registerEvents:l,calc:c,updateTexture:d,updateGeometry:f,changeFurTexture:i,changeFurTextureFromImage:u};var x=y["default"].config.texture,T=y["default"].config.geometry,R=256,H=60,S=40,M=document.createElement("canvas");M.width=R,M.height=R;var b=M.getContext("2d"),G=void 0,C=void 0,k=void 0,_=void 0,P=void 0,B=void 0,D=void 0,I=void 0,F=0,L=[],O=void 0,U=void 0,j=new THREE.Vector3(0,(-y["default"].config.gravity),0),W=new THREE.Vector2((-.5),.5),q={x:0,y:0,vx:0,vy:0}},{"./datGui":2,"./dom":3,"./loadTexture":5}],5:[function(e,t,r){"use strict";function n(e){return a||(a=new THREE.TextureLoader),a.load(e)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var a=void 0},{}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(){o(),i(),h["default"].init({scene:p,renderer:E,camera:m}),u(),h["default"].registerEvents()}function o(){E=new THREE.WebGLRenderer,E.setSize(c(),l()),E.setPixelRatio(E.getPixelRatio()),E.setClearColor(3355443),E.shadowMap.enabled=!0,E.shadowMap.type=THREE.PCFSoftShadowMap,g.$stage.append(E.domElement),p=new THREE.Scene,p.autoUpdate=!1,m=new THREE.PerspectiveCamera(30,s(),1,1e4),m.position.set(T*Math.cos(H),R,T*Math.sin(H)),p.add(m),x=new THREE.TrackballControls(m,g.$stage.get(0)),x.staticMoving=!1,x.maxDistance=1e3,x.minDistance=100}function i(){w=new THREE.DirectionalLight(16777215,.5),w.position.set(0,100,300),p.add(w),y=new THREE.AmbientLight(16777215),p.add(y)}function u(){g.$window.on("resize",function(){m.aspect=s(),m.updateProjectionMatrix(),E.setSize(c(),l())}),g.$textureInput.on("change",function(){var e=event.target.files;e.length>0&&!function(){var t=new FileReader;t.readAsDataURL(e[0]),t.onload=function(){var e=new Image;e.src=t.result,h["default"].changeFurTextureFromImage(e)}}()})}function d(){p.updateMatrixWorld(),E.render(p,m)}function f(){h["default"].calc(),h["default"].updateTexture(),h["default"].updateGeometry(),x.update(),d(),requestAnimationFrame(f)}function c(){return window.innerWidth}function l(){return window.innerHeight}function s(){return c()/l()}var g=e("./dom"),v=e("./fur"),h=n(v),m=void 0,p=void 0,E=void 0,w=void 0,y=void 0,x=void 0,T=150,R=40,H=Math.PI/2;a(),f()},{"./dom":3,"./fur":4}]},{},[1]);